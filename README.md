# LISSA Infrastructure

The LISSA Infrastructure project can be used to provision one or more servers
with the services needed for running the LISSA tech stack. It uses Chef for
provisioning machines and comes with a Vagrantfile for testing LISSA on your
local machine.

## Requirements (Vagrant)

- Virtualbox 4.3.10+
- Vagrant 1.6.3+
    - Vagrant Omnibus plugin. Use `vagrant plugin install vagrant-omnibus`, if
      the installer returns an error about not being able to install 'nokogiri'
      then install the xcode command line tools by executing `xcode-select --install`
    - Vagrant Hostsupdater plugin. Use `vagrant plugin install vagrant-hostsupdater`

## Installation

- cd to the root of this project
- Execute `vagrant up --provision` (takes at least 10 minutes)
- To deploy LISSA Kickstart clone the [deploy respository](https://github.com/oneagency/lissa_deploy)
  and follow the instructions in the readme.

Please see Troubleshooting if deploying LISSA Kickstart doesn't work.

## Usage

- Drupal backend URL: http://admin.lissa.dev
- Host path to drupal: admin-server/docroot
- Vagrant path to drupal: /var/www/admin-server/docroot
- Development should happen in admin-server/docroot/profiles/lissa_kickstart,
  which is a clone of the 8.0.x branch of the lissa_kickstart repository.

## Troubleshooting

### When deploying LISSA Kickstart I get a "Authentication failed for user vagrant@admin.lissa.dev" error.

Add the private key generated by Vagrant.

You can find the path to the key by running `vagrant ssh-config` from the root
of this repository.

You can add the key by running `ssh-add -K /path/to/private_key`.
